{% extends 'layout.html' %}

{% block body %}

<!-- Page Header -->

<!-- Include the css file -->
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/manage.css') }}">

<!-- Include the navbar-->
{% include 'includes/_dashboard_nav.html' %}

<!-- Main Content -->

<div class="container">
  <div class="row">
    <div class="col-lg-12 col-md-12">
        <a class="btn btn-success" href="/add" id="add_button"> Add post </a>
        <hr>

        <table class="table table-striped">
          <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Subtitle</th>
            <th>Author</th>
            <th>Date Posted</th>
            <th></th>
            <th></th>
          </tr>

          {% for post in posts %}
            <tr>
              <td>{{post.id}}</td>
              <td>{{post.title[:40]+ '...'}}</td>
              <td>{{post.subtitle[:40] + '...'}}</td>
              <td>{{post.author}}</td>
              <td>{{moment(post.date_posted).format('llll')}}</td>
              <!--<td>{{post.date_posted.strftime('%B %d, %Y - %H:%M:%S')}}</td>-->
              <td><a href="edit_post/{{post.id}}" class="btn btn-default pull-right" id="edit_button">Edit</a></td>
              <td>
                <form action="{{url_for('delete_post', id=post.id)}}" method="POST">
                  <input type="hidden" name="_method" value="DELETE">
                  <input type="submit" value="DELETE" class="btn btn-danger" id="delete_button">
                </form>
              </td>
            </tr>
          {% endfor %}
        </table>

      </div>
    </div>
  </div>
{% endblock %}
